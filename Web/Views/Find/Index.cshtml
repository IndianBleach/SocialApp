@model FindUsersViewModel;
@using ApplicationCore.DTOs;

@{
    ViewData["Title"] = "Найти участников";
}

@{
    string avatar = @User.Claims.Where(x => x.Type.Equals("UserAvatarName")).Select(x => x.Value).SingleOrDefault();
    string userName = @User.Claims.Where(x => x.Type.Equals("UserName")).Select(x => x.Value).SingleOrDefault();
}

<div class="d-none position-fixed top-0" id="hideBackgroundWrapper">
    <div style="margin-top: 6rem;"
         class="position-fixed col-12 d-flex justify-content-center">
        <div id="checkOutContainer">
            <div class="d-flex position-relative">
                @if (!Model.IsAuthorized)
                {
                    <!--Authorization-->
                    <div id="loginWindow" class="win-hide window_rounded_shadow d-none login-window">
                        <form id="userSignupInfoForm" class="p-5">
                            <div class="mb-3 text-center">
                                <span class="t-md t-med clr-mute">Основные данные 1/2</span>
                            </div>
                            <div class="form-floating mb-3">
                                <input autocomplete="off"
                                       minlength="4"
                                       maxlength="32"
                                       type="text"
                                       class="form-upd begin-validate need-next-input form-control"
                                       id="floatingInput"
                                       placeholder="Имя пользователя" />
                                <label class="text-dark" for="floatingInput">Имя пользователя</label>
                            </div>
                            <div class="mb-3 form-floating">
                                <input autocomplete="off"
                                       minlength="6"
                                       maxlength="32"
                                       type="password"
                                       class="form-upd begin-validate need-next-input form-control"
                                       id="floatingPassword"
                                       placeholder="Пароль" />
                                <label class="text-dark" for="floatingPassword">Пароль</label>
                            </div>
                            <div class="mb-3 form-floating">
                                <input autocomplete="off"
                                       minlength="6"
                                       maxlength="32"
                                       type="password"
                                       class="form-upd begin-validate need-next-input form-control"
                                       id="floatingPassword"
                                       placeholder="Подтвердите пароль" />
                                <label class="text-dark" for="floatingPassword">Подтвердите пароль</label>
                            </div>
                            <div class="mt-4">
                                <button id="asyncSelectTagsBtn"
                                        disabled
                                        class="bubbly-button icon-link-btn icon-btn-disabled">
                                    Выбрать теги
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         width="16"
                                         height="16"
                                         fill="currentColor"
                                         class="bi bi-arrow-right"
                                         viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                              d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" />
                                    </svg>
                                </button>
                                <hr class="clr-mute" />
                                <div class="text-center">
                                    <span class="pb-2 t-md t-med clr-mute">Уже есть аккаунт?</span>
                                    <button id="toSigninWindowBtn"
                                            class="mt-2 icon-link-btn bg-transparent">
                                        Вход
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="selectTagWindow"
                         class="win-hide z-m10 selectTagContainer position-absolute window_rounded_shadow login-window">
                        <form id="userSignupTagsForm" class="p-5">
                            <div class="mb-3 text-center">
                                <span class="t-md t-med clr-mute">Интересующие теги 2/2</span>
                            </div>
                            <div id="choiceTags" class="d-flex flex-wrap">
                                @foreach (var tag in Model.Tags)
                                {
                                    <button data-tag="@tag.Guid" class="m-1 async-select-tag btn-tag">
                                        @tag.Name
                                    </button>
                                }
                            </div>
                            <hr class="clr-mute" />
                            <div class="mb-3 text-center">
                                <span class="pb-2 t-lg clr-white">
                                    Вы выбрали ( <span id="selectedTagsCount">0</span> / 5 )
                                </span>
                                <div class="mt-2" id="selectedTags"></div>
                            </div>
                            <div class="mt-4">
                                <button type="submit" class="bubbly-button icon-link-btn">
                                    Регистрация
                                </button>
                                <div class="mt-2 text-center">
                                    <button id="prevLoginWindowBtn"
                                            class="btn bg-transparent t-sm clr-mute">
                                        Вернуться
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="signinWindow"
                         class="position-absolute window_rounded_shadow d-none login-window">
                        <form id="userSignInForm" class="p-5">
                            <div class="mb-3 text-center">
                                <span class="t-md t-med clr-mute">Войти в существующий аккаунт</span>
                            </div>
                            <div class="form-floating mb-3">
                                <input autocomplete="off"
                                       type="text"
                                       class="form-upd form-control"
                                       id="floatingInput"
                                       placeholder="Имя пользователя" />
                                <label class="text-dark" for="floatingInput">Имя пользователя</label>
                            </div>
                            <div class="mb-3 form-floating">
                                <input autocomplete="off"
                                       type="password"
                                       class="form-upd form-control"
                                       id="floatingPassword"
                                       placeholder="Пароль" />
                                <label class="text-dark" for="floatingPassword">Пароль</label>
                            </div>
                            <div class="mt-4">
                                <button class="bubbly-button icon-link-btn">
                                    Войти
                                </button>
                                <hr class="clr-mute" />
                                <div class="text-center">
                                    <span class="pb-2 t-md t-med clr-mute">Нет аккаунта?</span>
                                    <button id="prevSignupWindowBtn"
                                            class="mt-2 icon-link-btn bg-transparent">
                                        Создать
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!---->
                }
                <!--Participation-->
                <div id="participationWindow" class="d-none window_rounded_shadow">
                    <div class="b-bottom d-flex p-2 ps-3 col-12 align-items-center justify-content-between">
                        <span class="clr-white t-md">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="19"
                                 height="19"
                                 fill="currentColor"
                                 class="clr-mute bi bi-person-plus"
                                 viewBox="0 0 16 16">
                                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" />
                                <path fill-rule="evenodd"
                                      d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                            </svg>
                            Недавние идеи
                        </span>
                        <button class="closeParticipationWindowBtn btn btn-sm bg-transparent clr-white">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="24"
                                 height="24"
                                 fill="currentColor"
                                 class="bi bi-x"
                                 viewBox="0 0 16 16">
                                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                            </svg>
                        </button>
                    </div>
                    <div class="col-12 p-4">
                        <div class="p-3 d-flex justify-content-center align-items-center">
                            <div class="d-flex align-items-center">
                                <img height="33"
                                     width="33"
                                     class="rounded-circle me-1"
                                     src="~/media/userAvatars/@avatar" />
                                <div class="ps-1">
                                    @userName
                                </div>
                            </div>
                        </div>
                        <div class="mt-2 b-left col-12 ps-3 pe-3">
                            <span class="t-sm clr-mute">Вы участвуйте</span>
                            <div class="pt-1 custom-scroll" id="participationWindowLoad">
                                <div class="mb-2 repostToUser">
                                    <a>
                                        <span class="t-smbold clr-white hover-white d-inline-block text-truncate"
                                              style="max-width: 190px;">
                                            Online SpaceshiompentOnline Spaceshiompent
                                        </span>
                                    </a>
                                    <label class="clr-mute t-smbold t-sm">Автор</label>
                                </div>
                                <div id="participationWindowLoadPrev" class="d-none d-flex justify-content-center h-100 align-items-center">
                                    <div class="pt-4 spinner-border clr-mute" role="status">
                                        <span class="sr-only"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!---->
                <!--New Idea + -->
                <div id="newIdeaWindow" class="d-none window_rounded_shadow">
                    <div class="b-bottom d-flex p-2 ps-3 col-12 align-items-center justify-content-between">
                        <span class="clr-white t-md">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="19"
                                 height="19"
                                 fill="currentColor"
                                 class="me-1 clr-mute bi bi-lightbulb"
                                 viewBox="0 0 16 16">
                                <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z" />
                            </svg>
                            Создать идею
                        </span>
                        <button class="closeNewIdeaWindowBtn btn btn-sm bg-transparent clr-white">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="24"
                                 height="24"
                                 fill="currentColor"
                                 class="bi bi-x"
                                 viewBox="0 0 16 16">
                                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                            </svg>
                        </button>
                    </div>
                    <div class="col-12 p-4">
                        <div class="text-center pt-3 pb-4">
                            <img src="~/media/userAvatars/@avatar"
                                 height="44"
                                 width="44"
                                 class="b-all box-shadow rounded-circle" />
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="40"
                                 height="40"
                                 fill="currentColor"
                                 class="ms-1 clr-white bi bi-lightbulb"
                                 viewBox="0 0 16 16">
                                <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z" />
                            </svg>
                        </div>
                        <div class="mt-2 col-12 d-flex justify-content-center">
                            <form id="asyncNewIdeaForm" class="col-10">
                                <div class="col-12 mb-2">
                                    <input autocomplete="off" minlength="4" maxlength="56" type="text"
                                           class="form-upd form-control"
                                           id="floatingInput" />
                                    <label class="pt-1 t-sm clr-mute" for="floatingInput">
                                        Придумайте название
                                    </label>
                                </div>
                                <div class="col-12 mb-3">
                                    <textarea autocomplete="off" minlength="4" maxlength="220" style="height: 82px; resize: none !important;"
                                              type="text"
                                              class="form-upd form-control"
                                              id="floatingInput"></textarea>
                                    <label class="pt-1 t-sm clr-mute" for="floatingInput">
                                        Дайте краткое описание своей идее
                                    </label>
                                </div>
                                <div class="mb-3 form-check d-flex align-items-center">
                                    <input class="bg-darklight form-check-input"
                                           type="checkbox"
                                           value=""
                                           id="flexCheckChecked" />
                                    <span class="me-1">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             width="26"
                                             height="26"
                                             fill="currentColor"
                                             class="clr-mute ms-1 me-1 bi bi-lock"
                                             viewBox="0 0 16 16">
                                            <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z" />
                                        </svg>
                                    </span>
                                    <div>
                                        <label class="t-sm clr-mute t-med form-check-label"
                                               for="flexCheckChecked">
                                            Секретная идея
                                        </label>
                                        <p class="mb-0 t-sm text-muted">
                                            Заявки по приглашениям, ограничен просмотр
                                        </p>
                                    </div>
                                </div>
                                <div id="choiceNewIdeaTags" class="d-flex flex-wrap">
                                    @foreach (var tag in Model.Tags)
                                    {
                                        <button data-tag="@tag.Guid" class="async-newidea-tag btn-tag">
                                            @tag.Name
                                        </button>
                                    }
                                </div>
                                <hr class="clr-mute" />
                                <div class="mb-3 text-center">
                                    <span class="pb-2 t-lg clr-white">
                                        Вы выбрали (
                                        <span id="selectedNewIdeaTagsCount">0</span> / 5 )
                                    </span>
                                    <div class="mt-2" id="selectedNewIdeaTags"></div>
                                </div>
                                <button type="submit" class="mt-3 bubbly-button icon-link-btn">
                                    Создать идею
                                </button>
                                <label id="newIdeaWindowError" class="pt-2 text-center text-danger t-sm">
                                </label>
                            </form>
                        </div>
                    </div>
                </div>
                <!---->
            </div>
        </div>
    </div>
</div>

@if (Model.IsAuthorized)
{
    <nav id="topNavbar" class="z-1 navbar navbar-expand-lg navbar-dark bg-black b-bottom">
        <div class="container container-micro pe-5">
            <a class="navbar-brand me-2" href="/">
                <img src="~/media/site/logo.png" alt="" width="36" />
            </a>
            <button class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Переключатель навигации">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <form asp-controller="find" class="search-nav-form flex-form-dark circle-flex-search">
                    <div class="dropdown">
                        <input autocomplete="off"
                               name="search"
                               id="dropdownMenuLink"
                               data-bs-toggle="dropdown"
                               aria-expanded="false"
                               class="search-form form-upd dropdown-toggle t-md form-control me-2 form-control"
                               type="search"
                               placeholder="Найти участника"
                               aria-label="Search" />
                        <ul class="mt-2 search-nav-dropdown pt-2 pb-2 col-12 rad-md bg-darkc dropdown-menu p-0 t-sm t-semi-bold"
                            aria-labelledby="dropdownMenuLink">
                            <h6 class="dropdown-header t-sm t-med">Найти по тегам</h6>
                            <div class="p-2 pt-0 col-12 d-flex flex-wrap">
                                @foreach (var tag in Model.Tags)
                                {
                                    <a asp-route-tag="@tag.Guid" asp-action="index" asp-controller="find" class="btn-tag">
                                        @tag.Name
                                    </a>
                                }
                            </div>
                            <h6 class="dropdown-header t-sm t-med">Найти по тегам</h6>
                            <div class="p-2 pt-0 col-12 d-flex">
                                <div class="pe-2 col">
                                    <input name="country"
                                           placeholder="Страна"
                                           class="form-upd p-2 form-control" />
                                </div>
                                <div class="pe-2 col">
                                    <input name="city"
                                           placeholder="Город"
                                           class="form-upd p-2 form-control" />
                                </div>
                            </div>
                        </ul>
                    </div>
                    <button class="btn btn-unfocus" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="16"
                             height="16"
                             fill="currentColor"
                             class="clr-mute bi bi-search"
                             viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                        </svg>
                    </button>
                </form>
                <ul style="align-items: center;"
                    class="navbar-nav ms-auto mb-2 mb-lg-0 pe-4">
                    <li class="nav-item">
                        <a class="nav-link-pad nav-link" href="/">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="22"
                                 height="22"
                                 fill="currentColor"
                                 class="bi bi-house"
                                 viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                                <path fill-rule="evenodd"
                                      d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
                            </svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a disabled class="nav-link-pad nav-link" href="/find">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="22"
                                 height="22"
                                 fill="currentColor"
                                 class="clr-white bi bi-people"
                                 viewBox="0 0 16 16">
                                <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                            </svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link-pad nav-link"  href="/chat">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="22"
                                 height="22"
                                 fill="currentColor"
                                 class="bi bi-chat"
                                 viewBox="0 0 16 16">
                                <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
                            </svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="showParticipationWindowBtn nav-link-pad nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="22"
                                 height="22"
                                 fill="currentColor"
                                 class="bi bi-lightbulb"
                                 viewBox="0 0 16 16">
                                <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z" />
                            </svg>
                        </a>
                    </li>
                    <li class="me-3 nav-item">
                        <button style="width: 34.5px;" class="showNewIdeaWindowBtn p-0 btn bg-transparent m-0 nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 width="22"
                                 height="22"
                                 fill="currentColor"
                                 class="bi bi-patch-plus"
                                 viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z" />
                            </svg>
                        </button>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-action="im" asp-controller="user">
                            <img src="~/media/userAvatars/@avatar" height="33" class="b-all rounded-circle" />
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
}
else
{
<nav style="height:75px!important;" class="bg-primary present_nav_wrapper container-fluid d-flex justify-content-center">
    <div class="present_nav d-flex position-fixed align-items-center justify-content-center"
         style="
          z-index: 10;
          height: 75px;
          top: 0 !important;
          background: rgb(0 90 255 / 0%);
        ">
        <a asp-action="login" asp-controller="authorize">
            <div class="d-flex align-items-center">
                <img class="image-link-animation present_hide_elems" height="33" src="~/media/site/logo.png" />
                <div class="ps-2">
                    <h1 class="t-brand mb-0">Roundile</h1>
                </div>
            </div>
        </a>

        <div class="ms-auto d-flex">
            <a class="t-nav-link me-3" href="/home">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="26"
                     height="26"
                     fill="currentColor"
                     class="bi bi-house"
                     viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                    <path fill-rule="evenodd"
                          d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
                </svg>
            </a>
            <a class="me-3 t-nav-link" href="/find">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="26"
                     height="26"
                     fill="currentColor"
                     class="bi bi-people"
                     viewBox="0 0 16 16">
                    <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                </svg>
            </a>
            <a class="me-3 t-nav-link" href="/about">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="23"
                     height="23"
                     fill="currentColor"
                     class="bi bi-info-circle"
                     viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                    <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                </svg>
            </a>
        </div>
        <div class="ps-2 ps-md-4">
            <button class="bg-black present_btn async-open-login bubbly-button  icon-link-btn">
                Присоединиться
            </button>
        </div>
    </div>
</nav>
}

<div class="container-sm main_idea" style="margin-top: 140px;">
    <main>
        @if (Model.SearchParamsResultString != null)
        {
            <div class="p-2 col-12 d-flex flex-wrap justify-content-center">
                <label class="text-muted t-sm t-smbold">@Model.SearchParamsResultString</label>
                <a asp-controller="find" class="t-smbold clr-blue t-sm ms-2">Сбросить</a>
            </div>
        }
        <div class="find_user_adaptive idea_adaptive">
            <div style="padding: 0px !important;"
                 class="idea_inside bg-darkn rad-lg b-all">
                <div class="ps-3 pe-3 col-12 d-flex p-3 align-items-center">
                    <div class="ps-2 col-3">
                        <h1 class="clr-white t-smbold t-md">Поиск участников</h1>
                    </div>
                    <div class="col">
                        <img style="opacity: 0.8;"
                             src="~/media/site/backPizza.png"
                             class="col-12" />
                    </div>
                </div>
                <div class="col-12">
                    @foreach (var item in Model.Users)
                    {
                        <div class="mb-1 p-2 pb-3 ps-md-3 pe-md-3 find-user b-bottom col-12 d-flex">
                            <a asp-action="@item.Guid" asp-controller="user" class="pt-2">
                                <img src="~/media/userAvatars/@item.AvatarImageName"
                                     height="99"
                                     width="99"
                                     class="rounded-circle" />
                            </a>
                            <div class="ps-3 col">
                                <div class="d-flex align-items-center justify-content-between col-12">
                                    <a asp-action="@item.Guid" asp-controller="user" class="clr-white t-smbold t-md">
                                        @item.Name
                                        @if (item.Address != null)
                                        {
                                            <span class="ps-1 text-muted t-med t-sm">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                     width="19"
                                                     height="19"
                                                     fill="currentColor"
                                                     class="bi bi-geo-alt"
                                                     viewBox="0 0 16 16">
                                                    <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z" />
                                                    <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                                </svg>
                                                @item.Address
                                            </span>
                                        }
                                    </a>
                                    <div class="dropdown">
                                        <button style="color: transparent !important;"
                                                class="pe-0 btn-unfocus btn btn-sm bg-transparent dropdown-toggle"
                                                type="button"
                                                id="dropdownMenuButton1"
                                                aria-expanded="false"
                                                data-bs-toggle="dropdown"
                                                data-bs-auto-close="outside">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 width="29"
                                                 height="29"
                                                 fill="currentColor"
                                                 class="hover-white clr-mute bi bi-three-dots"
                                                 viewBox="0 0 16 16">
                                                <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />
                                            </svg>
                                        </button>
                                        <ul class="rad-md b-all clr-white t-md bg-mute-window dropdown-menu"
                                            aria-labelledby="dropdownMenuButton1">
                                            @if (Model.IsAuthorized)
                                            {
                                                <li>
                                                    <a class="hover-white t-med clr-mute t-sm t-md dropdown-item"
                                                       asp-action="@item.Guid" asp-controller="user">Профиль</a>
                                                </li>
                                                <li>
                                                    <a class="hover-white t-med clr-mute t-sm t-md dropdown-item"
                                                       asp-controller="chat" asp-route-user="@item.Guid">Сообщение</a>
                                                </li>
                                                <li>
                                                    <button data-guid="@item.Guid"
                                                            class="btn-unfocus t-sm asyncSendFriendBtn btn bg-transparent hover-white t-med clr-mute t-sm t-md dropdown-item">
                                                        Добавить
                                                    </button>
                                                </li>
                                            }
                                            else
                                            {
                                                <li>
                                                    <a disabled class="hover-white t-med clr-mute t-sm t-md dropdown-item"
                                                       href="#">Профиль</a>
                                                </li>
                                                <li>
                                                    <a disabled class="hover-white t-med clr-mute t-sm t-md dropdown-item"
                                                       href="#">Сообщение</a>
                                                </li>
                                                <li>
                                                    <button disabled class="btn-unfocus t-sm asyncSendFriendBtn btn bg-transparent hover-white t-med clr-mute t-sm t-md dropdown-item">
                                                        Добавить
                                                    </button>
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                                <div class="user_tag_section overflow-hidden d-flex flex-wrap">
                                    @foreach (var tag in item.Tags)
                                    {
                                        <div class="btn-tag btn-tag-sm me-1 mb-1">@tag.Name</div>
                                    }
                                </div>
                                <div class="position-relative col-12">
                                    <p class="user_desc_section clr-mute t-sm text-truncate">
                                        @item.Description
                                    </p>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="p-2 d-flex">
                    @foreach (var pageInfo in Model.Pages)
                    {
                        <div class="me-1">
                            @if (pageInfo.IsActive)
                            {
                                <a asp-controller="find" disabled asp-action="index" asp-route-page="@pageInfo.NumberValue" class="disabled me-1 btn btn-page btn-page-activer">
                                    @pageInfo.NumberValue
                                </a>
                            }
                            else
                            {
                                <a asp-route-tag="@Model.SearchTag" asp-route-search="@Model.Search" asp-route-country="@Model.SearchCountry" asp-route-city="@Model.SearchCity" asp-controller="find" asp-action="index" asp-route-page="@pageInfo.NumberValue" class="me-1 btn btn-page">
                                    @pageInfo.NumberValue
                                </a>
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
    </main>
    <div class="ps-lg-3 mt-3 mt-md-0 idea_aside position-relative">
        <aside>
            <div class="position-relative">
                <div class="position_fixed_user position-fixed-idea">
                    <section>
                        <div class="col-12">
                            @foreach (var news in Model.LastNews)
                            {
                                <div class="mb-2 d-flex">
                                    <div class="pt-2">
                                        <img src="~/media/userAvatars/@news.UserAvatarName"
                                             height="33"
                                             width="33"
                                             class="rounded-circle" />
                                    </div>
                                    <div class="ps-2">
                                        <a asp-controller="user" asp-action="@news.UserGuid" class="t-smbold t-sm clr-white">@news.UserName</a>
                                        <br />
                                        @if (news.Type.Equals(HomeNewsType.NewUser))
                                        {
                                            <span class="t-med t-sm clr-mute">
                                                @news.Content
                                            </span>
                                        }
                                        else
                                        {
                                            <a asp-action="@news.IdeaGuid" asp-controller="idea">
                                                <label class="cursor-point t-med t-sm clr-mute">@news.Content<span class="ps-1 clr-blue t-smbold">@news.IdeaName</span></label>
                                            </a>
                                        }
                                    </div>
                                </div>
                            }
                        </div>
                    </section>
                    <section>
                        <div class="mt-4 col-12">
                            @if (Model.RecommendUsers != null)
                            {
                                <h5 class="pb-2 t-smbold t-lg clr-mute">Для ваших идей</h5>
                                @foreach (var recUser in Model.RecommendUsers)
                                {
                                    <div class="mb-2 d-flex">
                                        <div class="pt-2">
                                            <a asp-action="@recUser.Guid" asp-controller="user">
                                                <img src="~/media/userAvatars/@recUser.AvatarImageName"
                                                     height="33"
                                                     width="33"
                                                     class="rounded-circle" />
                                            </a>
                                        </div>
                                        <div class="ps-2">
                                            <div style="height:20px;">
                                                <a asp-action="@recUser.Guid" asp-controller="user" class="t-smbold t-sm clr-white">@recUser.Name</a>
                                            </div>
                                            <label class="t-med t-sm text-muted">
                                                Зашёл @recUser.DateJoined
                                            </label>
                                        </div>
                                    </div>
                                }
                            }
                            else
                            {
                                <div class="p-2">
                                    <label class="pb-1 clr-mute t-sm t-med">
                                        <span class="pb-2 text-muted t-xbold t-sm">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 width="16"
                                                 height="16"
                                                 fill="currentColor"
                                                 class="t-warning bi bi-lamp"
                                                 viewBox="0 0 16 16">
                                                <path fill-rule="evenodd"
                                                      d="M5.04.303A.5.5 0 0 1 5.5 0h5c.2 0 .38.12.46.303l3 7a.5.5 0 0 1-.363.687h-.002c-.15.03-.3.056-.45.081a32.731 32.731 0 0 1-4.645.425V13.5a.5.5 0 1 1-1 0V8.495a32.753 32.753 0 0 1-4.645-.425c-.15-.025-.3-.05-.45-.08h-.003a.5.5 0 0 1-.362-.688l3-7ZM3.21 7.116A31.27 31.27 0 0 0 8 7.5a31.27 31.27 0 0 0 4.791-.384L10.171 1H5.83L3.209 7.116Z" />
                                                <path d="M6.493 12.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.052.075l-.001.004-.004.01V14l.002.008a.147.147 0 0 0 .016.033.62.62 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.62.62 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411Z" />
                                            </svg>
                                            RoundTip
                                        </span>
                                        <div class="pt-1">
                                            Создавайте идеи, а мы подберем вам единомышленников
                                        </div>
                                    </label>
                                    @if (Model.IsAuthorized)
                                    {
                                        <button class="clr-blue t-smbold showNewIdeaWindowBtn p-0 btn bg-transparent m-0 nav-link">
                                            Создать
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 width="22"
                                                 height="22"
                                                 fill="currentColor"
                                                 class="ms-1 bi bi-patch-plus"
                                                 viewBox="0 0 16 16">
                                                <path fill-rule="evenodd"
                                                      d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
                                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z" />
                                            </svg>
                                        </button>
                                    }
                                    else
                                    {
                                        <button class="clr-blue t-smbold async-show-login p-0 btn bg-transparent m-0 nav-link">
                                            Создать
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 width="22"
                                                 height="22"
                                                 fill="currentColor"
                                                 class="ms-1 bi bi-patch-plus"
                                                 viewBox="0 0 16 16">
                                                <path fill-rule="evenodd"
                                                      d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z" />
                                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z" />
                                            </svg>
                                        </button>
                                    }
                                </div>
                            }
                        </div>
                    </section>
                </div>
            </div>
        </aside>
    </div>
</div>